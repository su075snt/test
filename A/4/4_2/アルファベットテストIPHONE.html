<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„Éà „Åä„Åπ„Çì„Åç„Çá„ÅÜ</title>
    <link href="https://fonts.googleapis.com" rel="stylesheet">
    <style>
        :root {
            --primary: #ff8ab3;
            --secondary: #ffeb3b;
            --bg: #e1f5fe;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Kosugi Maru', sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        #game-container {
            background: var(--card-bg);
            width: 90%;
            max-width: 450px;
            border-radius: 40px;
            padding: 20px;
            box-shadow: 0 15px 0 #81d4fa;
            border: 6px solid var(--primary);
            text-align: center;
            position: relative;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .stat-box {
            background: #4caf50;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            box-shadow: 0 4px 0 #2e7d32;
        }

        .remain-box { background: #ff9800; box-shadow: 0 4px 0 #e65100; }

        h1 { color: #ff4081; font-size: 1.3rem; margin: 10px 0; }

        #speaker-btn {
            background: var(--secondary);
            border: none;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            font-size: 50px;
            cursor: pointer;
            box-shadow: 0 6px 0 #fbc02d;
            margin: 10px 0;
        }

        #speaker-btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #fbc02d; }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .option-btn {
            background: white;
            border: 4px solid #b3e5fc;
            border-radius: 25px;
            padding: 15px 0;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            color: #0277bd;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: 0.1s;
        }

        .option-btn span { font-size: 22px; color: #ff8ab3; }

        .option-btn.correct { background: #c8e6c9; border-color: #4caf50; animation: jump 0.5s; }
        .option-btn.wrong { background: #ffcdd2; border-color: #f44336; }

        @keyframes jump { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        #message { height: 40px; color: #d32f2f; font-weight: bold; margin-top: 10px; font-size: 1.2rem; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="stats-bar">
        <div class="stat-box">„Åß„Åç„Åü: <span id="done-count">0</span>/26</div>
        <div class="stat-box remain-box">„ÅÆ„Åì„Çä: <span id="remain-count">26</span></div>
    </div>
    
    <h1>„Å©„Çå„Åã„Å™Ôºü „Åç„ÅÑ„Å¶„Åø„Å¶„Å≠ÔºÅ</h1>
    
    <button id="speaker-btn">üì¢</button>
    <div id="message"></div>

    <div class="options-grid" id="options"></div>
</div>

<script>
    let allLetters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
    let remainingLetters = [...allLetters];
    let currentTarget = "";
    
    const praises = ["„Åô„Åî„ÅÑÔºÅ", "„ÇÑ„Å£„Åü„Å≠ÔºÅ", "Â§©Êâç„Å†„Å≠ÔºÅ", "„Å∞„Å£„Å°„ÇäÔºÅ", "„Çà„Åè„Åß„Åç„Åü„Å≠ÔºÅ"];

    function getJpVoice() {
        const voices = window.speechSynthesis.getVoices();
        return voices.find(v => v.lang === 'ja-JP' && (v.name.includes('Kyoko') || v.name.includes('O-ren'))) || 
               voices.find(v => v.lang === 'ja-JP');
    }

    function speak(text, rate = 0.8) {
        window.speechSynthesis.cancel();
        const uttr = new SpeechSynthesisUtterance(text);
        uttr.voice = getJpVoice();
        uttr.lang = 'ja-JP';
        uttr.rate = rate;
        uttr.pitch = 1.3;
        window.speechSynthesis.speak(uttr);
    }

    function initGame() {
        // N·∫øu ƒë√£ ho√†n th√†nh h·∫øt 26 ch·ªØ
        if (remainingLetters.length === 0) {
            speak("„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅÂÖ®ÈÉ®„ÇØ„É™„Ç¢„Åó„Åü„ÇàÔºÅ„Åô„Åî„ÅÑ„Å≠ÔºÅ", 1.0);
            document.getElementById('message').innerText = "„Åú„Çì„Å∂„ÇØ„É™„Ç¢ÔºÅ„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅ";
            setTimeout(() => {
                remainingLetters = [...allLetters];
                updateStats();
                initGame();
            }, 4000);
            return;
        }

        const optionsEl = document.getElementById('options');
        const msgEl = document.getElementById('message');
        optionsEl.innerHTML = "";
        msgEl.innerText = "";

        // Ch·ªçn ng·∫´u nhi√™n 1 ch·ªØ trong danh s√°ch c√≤n l·∫°i
        currentTarget = remainingLetters[Math.floor(Math.random() * remainingLetters.length)];

        // T·∫°o 4 ƒë√°p √°n
        let choices = [currentTarget];
        while (choices.length < 4) {
            let rand = allLetters[Math.floor(Math.random() * allLetters.length)];
            if (!choices.includes(rand)) choices.push(rand);
        }
        choices.sort(() => Math.random() - 0.5);

        choices.forEach(char => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerHTML = `${char} <span>${char.toLowerCase()}</span>`;
            btn.onclick = () => checkAnswer(char, btn);
            optionsEl.appendChild(btn);
        });

        setTimeout(() => speak(currentTarget, 0.6), 300);
    }

    function checkAnswer(selected, btn) {
        if (selected === currentTarget) {
            // X√≥a ch·ªØ c√°i ƒë√£ l√†m ƒë√∫ng kh·ªèi danh s√°ch c√≤n l·∫°i
            remainingLetters = remainingLetters.filter(item => item !== currentTarget);
            updateStats();
            
            btn.classList.add('correct');
            const p = praises[Math.floor(Math.random() * praises.length)];
            document.getElementById('message').innerText = p;
            speak(p);
            
            setTimeout(initGame, 2000);
        } else {
            btn.classList.add('wrong');
            speak("„Åñ„Çì„Å≠„ÇìÔºÅ„ÇÇ„ÅÜ„ÅÑ„Å£„Åã„ÅÑÔºÅ");
            document.getElementById('message').innerText = "„ÇÇ„ÅÜ„ÅÑ„Å£„Åã„ÅÑÔºÅ";
            setTimeout(() => btn.classList.remove('wrong'), 500);
        }
    }

    function updateStats() {
        const done = 26 - remainingLetters.length;
        document.getElementById('done-count').innerText = done;
        document.getElementById('remain-count').innerText = remainingLetters.length;
    }

    document.getElementById('speaker-btn').onclick = () => speak(currentTarget, 0.5);

    // K√≠ch ho·∫°t audio cho iOS
    window.addEventListener('touchstart', () => speak(""), { once: true });

    window.speechSynthesis.onvoiceschanged = () => {
        if (currentTarget === "") initGame();
    };
    if (window.speechSynthesis.getVoices().length > 0) initGame();
</script>

</body>
</html>