<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hiragana Mastery</title>
    <link href="https://cdnjs.cloudflare.com" rel="stylesheet">
    <style>
        :root { --bg: #0b1120; --card: #1e293b; --accent: #38bdf8; --text: #f1f5f9; --char-c: #38bdf8; }
        body { margin: 0; font-family: 'Hiragino Sans', sans-serif; background: var(--bg); color: var(--text); -webkit-tap-highlight-color: transparent; }
        
        /* Header & Tabs */
        .top-bar { display: flex; align-items: center; padding: 10px 15px; background: #0f172a; border-bottom: 1px solid #334155; position: sticky; top: 0; z-index: 1000; height: 50px; }
        .tabs { display: flex; gap: 8px; position: absolute; left: 50%; transform: translateX(-50%); }
        .tab-btn { background: none; border: none; color: #94a3b8; padding: 8px 12px; cursor: pointer; font-weight: bold; font-size: 0.9rem; border-radius: 6px; transition: 0.2s; }
        .tab-btn.active { color: var(--accent); background: rgba(56, 189, 248, 0.1); }
        .menu-toggle { background: var(--accent); border: none; color: #000; width: 38px; height: 38px; border-radius: 8px; cursor: pointer; margin-left: auto; }

        /* Grid Layouts */
        .grid-wrapper { padding: 20px; display: flex; justify-content: center; }
        .grid { display: grid; width: 100%; max-width: 650px; gap: 10px; }
        .grid-5 { grid-template-columns: repeat(5, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }

        .card { background: var(--card); border-radius: 12px; aspect-ratio: 1/1; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; border: 1px solid rgba(255,255,255,0.05); transition: transform 0.1s; }
        .card:active { transform: scale(0.95); background: #2d3a4f; }
        
        .char-txt { font-size: 2.5rem; color: var(--char-c); font-weight: bold; line-height: 1; }
        .sub-info { font-size: 0.8rem; color: #94a3b8; margin-top: 6px; text-align: center; }
        .icon { font-size: 1.1rem; margin-bottom: 2px; display: block; }

        /* Slide Menu */
        #side-menu { position: fixed; top: 0; right: -300px; width: 280px; height: 100%; background: #1e293b; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 2000; padding: 25px; box-sizing: border-box; box-shadow: -5px 0 20px rgba(0,0,0,0.5); }
        #side-menu.open { right: 0; }
        .opt-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.8rem; margin-bottom: 5px; color: #cbd5e1; }
        select, input[type="range"] { width: 100%; padding: 8px; border-radius: 6px; background: #0f172a; color: #fff; border: 1px solid #475569; }
        .hidden { display: none !important; }
        
        @media (max-width: 400px) { .char-txt { font-size: 1.8rem; } .sub-info { font-size: 0.7rem; } }
    </style>
</head>
<body>

<div class="top-bar">
    <div class="tabs">
        <button class="tab-btn active" onclick="changeTab('basic', this)">æ¸…éŸ³</button>
        <button class="tab-btn" onclick="changeTab('tenten', this)">æ¿éŸ³</button>
        <button class="tab-btn" onclick="changeTab('combo', this)">æ‹—éŸ³</button>
    </div>
    <button class="menu-toggle" onclick="toggleMenu()"><i class="fas fa-cog"></i></button>
</div>

<div id="side-menu">
    <h3 style="margin-top:0; font-size: 1.2rem;">è¨­å®š (Settings)</h3>
    <div class="opt-group"><label>æ–‡å­—ã®è‰² (MÃ u chá»¯)</label><input type="color" id="colorChar" value="#38bdf8" onchange="updateTheme()"></div>
    <div class="opt-group"><label>èƒŒæ™¯è‰² (MÃ u ná»n)</label><input type="color" id="colorBg" value="#0b1120" onchange="updateTheme()"></div>
    <div class="opt-group"><label>é€Ÿåº¦ (Tá»‘c Ä‘á»™)</label><input type="range" id="speed" min="0.5" max="1.5" step="0.1" value="1"></div>
    <div class="opt-group"><label>æ—¥æœ¬èªéŸ³å£° (Giá»ng Nháº­t)</label><select id="vJa"></select></div>
    <div class="opt-group"><label>ãƒ™ãƒˆãƒŠãƒ èªéŸ³å£° (Giá»ng Viá»‡t)</label><select id="vVi"></select></div>
    <div class="opt-group"><label>å†ç”Ÿãƒ¢ãƒ¼ãƒ‰ (Cháº¿ Ä‘á»™)</label>
        <select id="mode">
            <option value="ja">æ—¥æœ¬èªã®ã¿ (Chá»‰ Nháº­t)</option>
            <option value="javi">æ—¥è¶Šä¸¡æ–¹ (Nháº­t-Viá»‡t)</option>
        </select>
    </div>
    <div class="opt-group">
        <label style="display:flex; align-items:center; gap:8px;">
            <input type="checkbox" id="showInfo" checked onchange="renderGrid()"> èªå½™ã‚’è¡¨ç¤º (Hiá»‡n tá»« vá»±ng)
        </label>
    </div>
    <button onclick="toggleMenu()" style="width:100%; padding:10px; background:var(--accent); border:none; border-radius:6px; cursor:pointer; font-weight:bold;">é–‰ã˜ã‚‹ (ÄÃ³ng)</button>
</div>

<div class="grid-wrapper">
    <div id="grid" class="grid grid-5"></div>
</div>

<script>
    const chars = {
        basic: [
            {h:'ã‚',i:'ğŸ­',v:'ã‚ã‚',m:'Káº¹o'},{h:'ã„',i:'ğŸ“',v:'ã„ã¡ã”',m:'Quáº£ DÃ¢u'},{h:'ã†',i:'ğŸ°',v:'ã†ã•ã',m:'con Thá»'},{h:'ãˆ',i:'ğŸ–ï¸',v:'ãˆã‚“ã´ã¤',m:'BÃºt chÃ¬'},{h:'ãŠ',i:'ğŸµ',v:'ãŠã¡ã‚ƒ',m:'TrÃ '},
            {h:'ã‹',i:'ğŸ¢',v:'ã‹ã‚',m:'Con RÃ¹a'},{h:'ã',i:'ğŸŒ³',v:'ã',m:'CÃ¢y'},{h:'ã',i:'ğŸš—',v:'ãã‚‹ã¾',m:'Xe hÆ¡i'},{h:'ã‘',i:'ğŸ“±',v:'ã‘ã„ãŸã„',m:'Äiá»‡n thoáº¡i'},{h:'ã“',i:'ğŸ§’',v:'ã“ã©ã‚‚',m:'Tráº» em'},
            {h:'ã•',i:'ğŸŸ',v:'ã•ã‹ãª',m:'CÃ¡'},{h:'ã—',i:'ğŸ§‚',v:'ã—ãŠ',m:'Muá»‘i'},{h:'ã™',i:'ğŸ‰',v:'ã™ã„ã‹',m:'DÆ°a háº¥u'},{h:'ã›',i:'ğŸ§¼',v:'ã›ã£ã‘ã‚“',m:'XÃ  phÃ²ng'},{h:'ã',i:'â˜ï¸',v:'ãã‚‰',m:'Trá»i'},
            {h:'ãŸ',i:'ğŸ¥š',v:'ãŸã¾ã”',m:'Quáº£ Trá»©ng'},{h:'ã¡',i:'ğŸ—ºï¸',v:'ã¡ãš',m:'Báº£n Ä‘á»“'},{h:'ã¤',i:'ğŸŒ™',v:'ã¤ã',m:'máº·t TrÄƒng'},{h:'ã¦',i:'ğŸ–ï¸',v:'ã¦',m:'bÃ n Tay'},{h:'ã¨',i:'ğŸ¯',v:'ã¨ã‚‰',m:'Con Há»•'},
            {h:'ãª',i:'ğŸ†',v:'ãªã™',m:'quáº£ CÃ  tÃ­m'},{h:'ã«',i:'ğŸ¥©',v:'ã«ã',m:'Thá»‹t'},{h:'ã¬',i:'ğŸ•',v:'ã„ã¬',m:'Con ChÃ³'},{h:'ã­',i:'ğŸˆ',v:'ã­ã“',m:'Con MÃ¨o'},{h:'ã®',i:'ğŸ¥¤',v:'ã®ã¿ã‚‚ã®',m:'Äá»“ uá»‘ng'},
            {h:'ã¯',i:'ğŸŒ¸',v:'ã¯ãª',m:'Hoa'},{h:'ã²',i:'ğŸ”¥',v:'ã²',m:'Lá»­a'},{h:'ãµ',i:'ğŸš¢',v:'ãµã­',m:'TÃ u'},{h:'ã¸',i:'ğŸ',v:'ã¸ã³',m:'Con Ráº¯n'},{h:'ã»',i:'â­',v:'ã»ã—',m:'NgÃ´i Sao'},
            {h:'ã¾',i:'ğŸªŸ',v:'ã¾ã©',m:'Cá»­a sá»•'},{h:'ã¿',i:'ğŸ‘‚',v:'ã¿ã¿',m:'Tai'},{h:'ã‚€',i:'ğŸ',v:'ã‚€ã—',m:'SÃ¢u bá»'},{h:'ã‚',i:'ğŸ‘ï¸',v:'ã‚',m:'Máº¯t'},{h:'ã‚‚',i:'ğŸ‘',v:'ã‚‚ã‚‚',m:'Quáº£ ÄÃ o'},
            {h:'ã‚„',i:'â›°ï¸',v:'ã‚„ã¾',m:'NÃºi'},{h:'',i:'',v:'',m:''},{h:'ã‚†',i:'â„ï¸',v:'ã‚†ã',m:'Tuyáº¿t'},{h:'',i:'',v:'',m:''},{h:'ã‚ˆ',i:'ğŸŒ™',v:'ã‚ˆã‚‹',m:'ban ÄÃªm'},
            {h:'ã‚‰',i:'ğŸœ',v:'ã‚‰ãƒ¼ã‚ã‚“',m:'mÃ¬ ramen'},{h:'ã‚Š',i:'ğŸ',v:'ã‚Šã‚“ã”',m:'TÃ¡o'},{h:'ã‚‹',i:'ğŸ’',v:'ã•ã‚‹',m:'Con Khá»‰'},{h:'ã‚Œ',i:'ğŸ‹',v:'ã‚Œã‚‚ã‚“',m:'Quáº£ Chanh'},{h:'ã‚',i:'ğŸ•¯ï¸',v:'ã‚ã†ãã',m:'Náº¿n'},
            {h:'ã‚',i:'ğŸŠ',v:'ã‚ã«',m:'CÃ¡ sáº¥u'},{h:'',i:'',v:'',m:''},{h:'ã‚’',i:'ğŸ“',v:'ã‚’',m:'Trá»£ tá»« á»‘'},{h:'',i:'',v:'',m:''},{h:'ã‚“',i:'ğŸ“–',v:'',m:'Ã¢m mÅ©i'}
        ],
        tenten: [
            {h:'ãŒ',i:'ğŸ«',v:'ãŒã£ã“ã†',m:'TrÆ°á»ng há»c'},{h:'ã',i:'ğŸ¦',v:'ãã‚“ã“ã†',m:'NgÃ¢n hÃ ng'},{h:'ã',i:'ğŸ§¤',v:'ãã‚“ã¦',m:'gÄƒng tay'},{h:'ã’',i:'ğŸ˜Š',v:'ã’ã‚“ã',m:'Khá»e'},{h:'ã”',i:'ğŸš',v:'ã”ã¯ã‚“',m:'CÆ¡m'},
            {h:'ã–',i:'ğŸ“–',v:'ã–ã£ã—',m:'Táº¡p chÃ­'},{h:'ã˜',i:'ğŸ«¨',v:'ã˜ã—ã‚“',m:'Äá»™ng Ä‘áº¥t'},{h:'ãš',i:'â†”ï¸',v:'ãšã£ã¨',m:'XuyÃªn Suá»‘t'},{h:'ãœ',i:'â™¾ï¸',v:'ãœã‚“ã¶',m:'Táº¥t cáº£'},{h:'ã',i:'ğŸ˜',v:'ãã†',m:'Voi'},
            {h:'ã ',i:'ğŸ«',v:'ã ã„ãŒã',m:'Äáº¡i há»c'},{h:'ã¢',i:'ğŸ©¸',v:'ã¯ãªã¢',m:'MÃ¡u cam'},{h:'ã¥',i:'â¡ï¸',v:'ã¤ã¥ã',m:'Tiáº¿p tá»¥c'},{h:'ã§',i:'ğŸ“',v:'ã§ã‚“ã‚',m:'ÄT'},{h:'ã©',i:'ğŸšª',v:'ã©ã‚',m:'Cá»­a'},
            {h:'ã°',i:'ğŸ”¢',v:'ã°ã‚“ã”ã†',m:'Sá»‘'},{h:'ã³',i:'ğŸ¥',v:'ã³ã‚‡ã†ã„ã‚“',m:'Bá»‡nh viá»‡n'},{h:'ã¶',i:'ğŸ·',v:'ã¶ãŸ',m:'Lá»£n'},{h:'ã¹',i:'ğŸ“š',v:'ã¹ã‚“ãã‚‡ã†',m:'Há»c'},{h:'ã¼',i:'ğŸ§¢',v:'ã¼ã†ã—',m:'MÅ©'},
            {h:'ã±',i:'ğŸ',v:'ã±ã‚“',m:'BÃ¡nh mÃ¬'},{h:'ã´',i:'âœ¨',v:'ã´ã‹ã´ã‹',m:'Láº¥p lÃ¡nh'},{h:'ã·',i:'ğŸŒ€',v:'ã›ã‚“ã·ã†ã',m:'quáº¡t mÃ¡y'},{h:'ãº',i:'ğŸ–Šï¸',v:'ãºã‚“',m:'BÃºt'},{h:'ã½',i:'ğŸ“®',v:'ã½ã™ã¨',m:'HÃ²m thÆ°'}
        ],
        combo: [
            {h:'ãã‚ƒ',i:'ğŸ±',v:'ãŠãã‚ƒãã•ã¾',m:'KhÃ¡chã€€hÃ ng'},{h:'ãã‚…',i:'ğŸ¥’',v:'ãã‚…ã†ã‚Š',m:'DÆ°a chuá»™t'},{h:'ãã‚‡',i:'ğŸ‘ª',v:'ãã‚‡ã†ã ã„',m:'Anh em,'},
            {h:'ã—ã‚ƒ',i:'ğŸ“·',v:'ã—ã‚ƒã—ã‚“',m:'áº¢nh'},{h:'ã—ã‚…',i:'ğŸ¨',v:'ã—ã‚…ã¿',m:'Sá»Ÿ thÃ­ch'},{h:'ã—ã‚‡',i:'ğŸ±',v:'ã—ã‚‡ãã©ã†',m:'NhÃ  Äƒn'},
            {h:'ã¡ã‚ƒ',i:'ğŸµ',v:'ãŠã¡ã‚ƒ',m:'TrÃ '},{h:'ã¡ã‚…',i:'ğŸ…¿ï¸',v:'ã¡ã‚…ã†ã—ã‚ƒã˜ã‚‡ã†',m:'BÃ£i Ä‘á»— xe'},{h:'ã¡ã‚‡',i:'ğŸ¦‹',v:'ã¡ã‚‡ã†ã¡ã‚‡ã†',m:'con bÆ°á»›m'},
            {h:'ã«ã‚ƒ',i:'ğŸˆ',v:'ã«ã‚ƒãƒ¼',m:'MÃ¨o'},{h:'ã«ã‚…',i:'ğŸ¥›',v:'ãã‚…ã†ã«ã‚…ã†',m:'Sá»¯a'},{h:'ã«ã‚‡',i:'ğŸŒ±',v:'ã«ã‚‡ã',m:'Má»c'},
            {h:'ã²ã‚ƒ',i:'ğŸ’¯',v:'ã²ã‚ƒã',m:'TrÄƒm'},{h:'ã²ã‚…',i:'ğŸŒ¬ï¸',v:'ã²ã‚…ã†',m:'GiÃ³'},{h:'ã²ã‚‡',i:'ğŸ§Š',v:'ã²ã‚‡ã†ã–ã‚“',m:'NÃºi bÄƒng'},
            {h:'ã¿ã‚ƒ',i:'ğŸ’“',v:'ã¿ã‚ƒã',m:'Máº¡ch'},{h:'ã¿ã‚…',i:'ğŸµ',v:'ã¿ã‚…ãƒ¼ã˜ã£ã',m:'Nháº¡c'},{h:'ã¿ã‚‡',i:'ğŸ†”',v:'ã¿ã‚‡ã†ã˜',m:'Há»'},
            {h:'ã‚Šã‚ƒ',i:'ğŸ“',v:'ã‚Šã‚ƒã',m:'Viáº¿t táº¯t'},{h:'ã‚Šã‚…',i:'ğŸ²',v:'ã‚Šã‚…ã†',m:'con Rá»“ng'},{h:'ã‚Šã‚‡',i:'âœˆï¸',v:'ã‚Šã‚‡ã“ã†',m:'Du lá»‹ch'},
            {h:'ãã‚ƒ',i:'ğŸ”„',v:'ãã‚ƒã',m:'Ä‘áº£o NgÆ°á»£c'},{h:'ãã‚…',i:'ğŸ¥©',v:'ãã‚…ã†ã«ã',m:'Thá»‹t bÃ²'},{h:'ãã‚‡',i:'ğŸ£',v:'ãã‚‡ãã‚‡ã†',m:'NgÆ° nghiá»‡p'},
            {h:'ã˜ã‚ƒ',i:'ğŸ¥”',v:'ã˜ã‚ƒãŒã„ã‚‚',m:'Khoai tÃ¢y'},{h:'ã˜ã‚…',i:'ğŸ‘¨â€ğŸ«',v:'ã˜ã‚…ãã‚‡ã†',m:'Tiáº¿t há»c'},{h:'ã˜ã‚‡',i:'ğŸ‘©',v:'ã˜ã‚‡ã›ã„',m:'Ná»¯ giá»›i'},
            {h:'ã³ã‚ƒ',i:'ğŸ¢',v:'ã•ã‚“ã³ã‚ƒã',m:'300'},{h:'ã³ã‚…',i:'ğŸï¸',v:'ã³ã‚…ãƒ¼ã‚“',m:'VÃ¨o'},{h:'ã³ã‚‡',i:'ğŸ¤’',v:'ã³ã‚‡ã†ã',m:'Bá»‡nh'},
            {h:'ã´ã‚ƒ',i:'ğŸ™ï¸',v:'ã‚ã£ã´ã‚ƒã',m:'600'},{h:'ã´ã‚…',i:'ğŸ’',v:'ã´ã‚…ã‚',m:'Trong sÃ¡ng'},{h:'ã´ã‚‡',i:'ğŸ°',v:'ã´ã‚‡ã‚“ã´ã‚‡ã‚“',m:'tiáº¿ng thá» Nháº£y'}
        ]
    };

    let currentTab = 'basic';
    const synth = window.speechSynthesis;

    function renderGrid() {
        const grid = document.getElementById('grid');
        grid.className = `grid ${currentTab === 'combo' ? 'grid-3' : 'grid-5'}`;
        grid.innerHTML = '';
        const show = document.getElementById('showInfo').checked;

        chars[currentTab].forEach(item => {
            const card = document.createElement('div');
            card.className = 'card';
            if (item.h === '') {
                card.style.visibility = 'hidden';
            } else {
                card.onclick = () => speak(item);
                card.innerHTML = `
                    <span class="char-txt">${item.h}</span>
                    <div class="sub-info ${show ? '' : 'hidden'}">
                        <span class="icon">${item.i}</span>
                        <div>${item.v}</div>
                        <div style="color:var(--accent); font-weight:bold;">${item.m}</div>
                    </div>`;
            }
            grid.appendChild(card);
        });
    }

    function changeTab(tab, btn) {
        currentTab = tab;
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderGrid();
    }

    function toggleMenu() { document.getElementById('side-menu').classList.toggle('open'); }

    function updateTheme() {
        document.documentElement.style.setProperty('--char-c', document.getElementById('colorChar').value);
        document.documentElement.style.setProperty('--bg', document.getElementById('colorBg').value);
    }

    function speak(item) {
        synth.cancel();
        const rate = parseFloat(document.getElementById('speed').value);
        const mode = document.getElementById('mode').value;
        const voices = synth.getVoices();

        const uChar = new SpeechSynthesisUtterance(item.h);
        uChar.voice = voices.find(v => v.name === document.getElementById('vJa').value);
        uChar.lang = 'ja-JP'; uChar.rate = rate;

        const uVocab = new SpeechSynthesisUtterance(item.v);
        uVocab.voice = uChar.voice; uVocab.lang = 'ja-JP'; uVocab.rate = rate;

        const uViet = new SpeechSynthesisUtterance(item.m);
        uViet.voice = voices.find(v => v.name === document.getElementById('vVi').value);
        uViet.lang = 'vi-VN'; uViet.rate = rate;

        synth.speak(uChar);
        setTimeout(() => {
            if(item.v) synth.speak(uVocab);
            if (mode === 'javi' && item.m) synth.speak(uViet);
        }, 300);
    }

    function initVoices() {
        const voices = synth.getVoices();
        const sJa = document.getElementById('vJa'), sVi = document.getElementById('vVi');
        sJa.innerHTML = ''; sVi.innerHTML = '';
        voices.forEach(v => {
            if (v.lang.includes('ja')) sJa.add(new Option(v.name, v.name));
            if (v.lang.includes('vi')) sVi.add(new Option(v.name, v.name));
        });
    }

    window.onload = () => {
        renderGrid();
        initVoices();
        if (synth.onvoiceschanged !== undefined) synth.onvoiceschanged = initVoices;
    };
</script>
</body>
</html>