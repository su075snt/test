<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TỪ VỰNG VẬT DỤNG　HẰNG NGÀY</title>
    <style>
        :root { --bg: #434343; --text: #0b5394; --card: #ffffff; --accent: #0984e3; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); color: var(--text); margin: 0; transition: 0.3s; }
        #side-menu { position: fixed; right: -300px; top: 0; width: 260px; height: 100%; background: #fff; box-shadow: -2px 0 10px rgba(0,0,0,0.1); z-index: 1000; padding: 20px; transition: 0.3s; overflow-y: auto; color: #333; }
        #side-menu.active { right: 0; }
        .menu-btn { position: fixed; top: 15px; right: 15px; z-index: 1001; padding: 10px 15px; background: var(--accent); color: white; border: none; border-radius: 5px; cursor: pointer; }
        .tabs { display: flex; flex-wrap: wrap; gap: 5px; padding: 60px 10px 10px; justify-content: center; }
        .tab-btn { padding: 8px 12px; border: none; background: #dfe6e9; cursor: pointer; border-radius: 4px; font-size: 13px; }
        .tab-btn.active { background: var(--accent); color: white; }
        .grid-container { display: none; grid-template-columns: repeat(5, 1fr); gap: 10px; padding: 15px; max-width: 1200px; margin: 0 auto; }
        .grid-container.active { display: grid; }
        .vocab-card { background: var(--card); padding: 15px 5px; border-radius: 8px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); cursor: pointer; border: 1px solid #eee; min-height: 120px; display: flex; flex-direction: column; justify-content: center; }
        .kanji { font-size: 1.2em; font-weight: bold; margin-bottom: 5px; color: #2d3436; }
        .hira { color: #636e72; font-size: 0.9em; margin-bottom: 5px; }
        .viet { color: #d63031; font-size: 0.85em; font-weight: 500; }
        .hidden { display: none !important; }
        @media (max-width: 800px) { .grid-container { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>

<button class="menu-btn" onclick="toggleMenu()">⚙ Cài đặt</button>

<div id="side-menu">
    <h3>Cấu hình</h3>
    <label>Màu nền: <input type="color" id="bgCol" value="#434343"></label><br><br>
    <label>Màu chữ: <input type="color" id="txCol" value="#0b5394"></label><hr>
    <label><input type="checkbox" id="chkHira" checked> Hiện Hiragana</label><br>
    <label><input type="checkbox" id="chkViet" checked> Hiện Tiếng Việt</label><hr>
    <label>Giọng mặc định: <select id="vSel" style="width:100%"></select></label><p style="font-size: 11px; color: gray;">* Hệ thống sẽ tự ưu tiên giọng đúng ngôn ngữ khi đọc Nhật-Việt.</p>
    <label>Tốc độ: <input type="range" id="rate" min="0.5" max="1.5" step="0.1" value="1"></label><br><br>
    <label>Chế độ đọc: 
        <select id="mode" style="width:100%">
            <option value="jp">Chỉ tiếng Nhật</option>
            <option value="jv" selected>Nhật - Việt (Chuẩn)</option>
        </select>
    </label><br><br>
    <button onclick="toggleMenu()" style="width:100%; padding: 10px; background: #eee; border: none; border-radius: 4px; cursor: pointer;">Đóng</button>
</div>

<div class="tabs" id="tabH"></div>
<div id="tabC"></div>

<script>
    const data = [
	 {k:"机", h:"つくえ", v:"Cái bàn"}, {k:"椅子", h:"いす", v:"Cái ghế"}, {k:"テレビ", h:"てれび", v:"Tivi"}, {k:"ソファ", h:"そふぁ", v:"Ghế sopha"}, {k:"時計", h:"とけい", v:"Đồng hồ"},
    {k:"電話", h:"でんわ", v:"Điện thoại"}, {k:"エアコン", h:"えあこん", v:"Điều hòa"}, {k:"扇風機", h:"せんぷうき", v:"Quạt điện"}, {k:"リモコン", h:"りもこん", v:"Điều khiển"}, {k:"充電器", h:"じゅうでんき", v:"dụng cụ Sạc pin"},
    {k:"鏡", h:"かがみ", v:"Cái gương"}, {k:"窓", h:"まど", v:"Cửa sổ"}, {k:"ドア", h:"どあ", v:"Cửa"}, {k:"床", h:"ゆか", v:"Sàn nhà"}, {k:"壁", h:"かべ", v:"Bức tường"},
    {k:"天井", h:"てんじょう", v:"Trần nhà"}, {k:"電球", h:"でんきゅう", v:"Bóng đèn"}, {k:"絨毯", h:"じゅうたん", v:"Thảm"}, {k:"カーテン", h:"かーてん", v:"Rèm cửa"}, {k:"絵", h:"え", v:"Bức tranh"},
    {k:"花瓶", h:"かびん", v:"Lọ hoa"}, {k:"本棚", h:"ほんだな", v:"Giá sách"}, {k:"ゴミ箱", h:"ごみばこ", v:"Thùng rác"}, {k:"鍵", h:"かぎ", v:"Chìa khóa"}, {k:"コンセント", h:"こんせんと", v:"Ổ cắm"},
    {k:"階段", h:"かいだん", v:"Cầu thang"}, {k:"廊下", h:"ろうか", v:"Hành lang"}, {k:"玄関", h:"げんかん", v:"Lối vào"}, {k:"ベランダ", h:"べらんだ", v:"Ban công"}, {k:"庭", h:"にわ", v:"Cái sân/vườn"},
    {k:"照明", h:"しょうめい", v:"Đèn chiếu sáng"}, {k:"額縁", h:"がくぶち", v:"Khung tranh"}, {k:"置物", h:"おきもの", v:"Đồ trang trí"}, {k:"灰皿", h:"はいざら", v:"Gạt tàn"}, {k:"空気清浄機", h:"くうきせいじょうき", v:"Máy lọc không khí"},
    {k:"加湿器", h:"かしつき", v:"Máy tạo độ ẩm"}, {k:"消火器", h:"しょうかき", v:"Bình chữa cháy"}, {k:"柱", h:"はしら", v:"Cột nhà"}, {k:"畳", h:"たたみ", v:"Chiếu Tatami"}, {k:"暖房", h:"だんぼう", v:"Máy sưởi"},
    {k:"インターホン", h:"いんたーほん", v:"Chuông cửa"}, {k:"新聞受け", h:"しんぶんうけ", v:"Hộp báo"}, {k:"郵便受け", h:"ゆうびんうけ", v:"Hộp thư"}, {k:"表札", h:"ひょうさつ", v:"Biển tên nhà"}, {k:"換気口", h:"かんきこう", v:"Lỗ thông gió"},
    {k:"クローゼット", h:"くろーぜっと", v:"Tủ âm tường"}, {k:"電気代", h:"でんきだい", v:"Tiền điện"}, {k:"水道代", h:"すいどうだい", v:"Tiền nước"}, {k:"ガス代", h:"がすだい", v:"Tiền gas"}, {k:"家賃", h:"やちん", v:"Tiền nhà"},
	  {k:"冷蔵庫", h:"れいぞうこ", v:"Tủ lạnh"}, {k:"電子レンジ", h:"でんしれんじ", v:"Lò vi sóng"}, {k:"炊飯器", h:"すいはんき", v:"Nồi cơm điện"}, {k:"台所", h:"だいどころ", v:"Nhà bếp"}, {k:"包丁", h:"ほうちょう", v:"Con dao"},
    {k:"まな板", h:"まないた", v:"Cái thớt"}, {k:"鍋", h:"なべ", v:"Cái nồi"}, {k:"フライパン", h:"ふらいぱん", v:"Chảo"}, {k:"お皿", h:"おさら", v:"Cái đĩa"}, {k:"箸", h:"はし", v:"Đôi đũa"},
    {k:"コップ", h:"こっぷ", v:"Cái cốc"}, {k:"スプーン", h:"すぷーん", v:"Cái thìa"}, {k:"フォーク", h:"ふぉーく", v:"Cái dĩa"}, {k:"茶碗", h:"ちゃわん", v:"Cái bát"}, {k:"水道", h:"すいどう", v:"Vòi nước"},
    {k:"電気ケトル", h:"でんきけとる", v:"Ấm siêu tốc"}, {k:"食卓", h:"しょくたく", v:"Bàn ăn"}, {k:"調味料", h:"ちょうみりょう", v:"Gia vị"}, {k:"砂糖", h:"さとう", v:"Đường"}, {k:"塩", h:"しお", v:"Muối"},
    {k:"油", h:"あぶら", v:"Dầu ăn"}, {k:"醤油", h:"しょうゆ", v:"Nước tương"}, {k:"味噌", h:"みそ", v:"Tương Miso"}, {k:"お盆", h:"おぼん", v:"Cái khay"}, {k:"やかん", h:"やかん", v:"Ấm đun nước"},
    {k:"栓抜き", h:"せんぬき", v:"Dụng cụ mở nút chai"}, {k:"缶切り", h:"かんきり", v:"Dụng cụ mở đồ hộp"}, {k:"ふきん", h:"ふきん", v:"Khăn lau bát"}, {k:"流し台", h:"ながしだい", v:"Bồn rửa bát"}, {k:"ガスコンロ", h:"がすこんろ", v:"Bếp gas"},
    {k:"オーブン", h:"おーぶん", v:"Lò nướng"}, {k:"トースター", h:"とーすたー", v:"Máy nướng bánh mì"}, {k:"食器棚", h:"しょっきだな", v:"Tủ chén bát"}, {k:"ラップ", h:"らっぷ", v:"Màng bọc thực phẩm"}, {k:"アルミホイル", h:"あるみほいる", v:"Giấy bạc"},
    {k:"洗剤", h:"せんざい", v:"Nước rửa bát"}, {k:"スポンジ", h:"すぽんじ", v:"Miếng bọt biển"}, {k:"換気扇", h:"かんきせん", v:"Quạt thông gió"}, {k:"ざる", h:"ざる", v:"Cái rổ"}, {k:"ボウル", h:"ぼうる", v:"Cái thau/bát lớn"},
    {k:"お玉", h:"おたま", v:"Cái muôi múc canh"}, {k:"フライ返し", h:"ふらいがえし", v:"Xẻng lật thức ăn"}, {k:"泡立て器", h:"あわだてき", v:"Cây đánh trứng"}, {k:"計量カップ", h:"けいりょうかっぷ", v:"Cốc đo lường"}, {k:"計量スプーン", h:"けいりょうすぷーん", v:"Thìa đo lường"},
    {k:"皮むき器", h:"かわむきき", v:"Dao gọt vỏ"}, {k:"炊事", h:"すいじ", v:"Việc bếp núc"}, {k:"食費", h:"しょくひ", v:"Tiền ăn"}, {k:"出前", h:"でまえ", v:"Gọi món giao tận nhà"}, {k:"お弁当", h:"おべんとう", v:"Cơm hộp"},
	{k:"ベッド", h:"べっど", v:"Cái giường"}, {k:"布団", h:"ふとん", v:"Chăn nệm"}, {k:"枕", h:"まくら", v:"Cái gối"}, {k:"毛布", h:"もうふ", v:"Chăn đắp"}, {k:"シーツ", h:"しーつ", v:"Ga trải giường"},
    {k:"箪笥", h:"たんす", v:"Tủ quần áo"}, {k:"ハンガー", h:"はんがー", v:"Móc áo"}, {k:"目覚まし時計", h:"めざましどけい", v:"Đồng hồ báo thức"}, {k:"櫛", h:"くし", v:"Cái lược"}, {k:"化粧品", h:"けしょうひん", v:"Mỹ phẩm"},
    {k:"服", h:"ふく", v:"Quần áo"}, {k:"靴下", h:"くつした", v:"Tất"}, {k:"下着", h:"したぎ", v:"Đồ lót"}, {k:"パジャマ", h:"ぱじゃま", v:"Đồ ngủ"}, {k:"タオル", h:"たおる", v:"Khăn tắm"},
    {k:"石鹸", h:"せっけん", v:"Xà bông"}, {k:"歯ブラシ", h:"はぶらし", v:"Bàn chải đánh răng"}, {k:"歯磨き粉", h:"はみがきこ", v:"Kem đánh răng"}, {k:"鏡台", h:"きょうだい", v:"Bàn trang điểm"}, {k:"眼鏡", h:"めがね", v:"Kính mắt"},
    {k:"財布", h:"さいふ", v:"Cái ví"}, {k:"鞄", h:"かばん", v:"Cái túi/cặp"}, {k:"靴", h:"くつ", v:"Giày"}, {k:"スリッパ", h:"すりっぱ", v:"Dép đi trong nhà"}, {k:"傘", h:"かさ", v:"Cái ô"},
    {k:"トイレ", h:"といれ", v:"Nhà vệ sinh"}, {k:"お風呂", h:"おふろ", v:"Bồn tắm"}, {k:"洗面台", h:"せんめんだい", v:"Bồn rửa mặt"}, {k:"シャワー", h:"しゃわー", v:"Vòi hoa sen"}, {k:"便座", h:"べんざ", v:"Bệ xí"},
    {k:"ドライヤー", h:"どらいやー", v:"Máy sấy tóc"}, {k:"髭剃り", h:"ひげそり", v:"Dao cạo râu"}, {k:"シャンプー", h:"しゃんぷー", v:"Dầu gội"}, {k:"リンス", h:"りんす", v:"Dầu xả"}, {k:"洗顔料", h:"せんがんりょう", v:"Sữa rửa mặt"},
    {k:"トイレットペーパー", h:"といれっとぺーぱー", v:"Giấy vệ sinh"}, {k:"生理用品", h:"せいりようひん", v:"Băng vệ sinh"}, {k:"爪切り", h:"つめきり", v:"Bấm móng tay"}, {k:"綿棒", h:"めんぼう", v:"Tăm bông"}, {k:"体重計", h:"たいじゅうけい", v:"Cân sức khỏe"},
    {k:"浴衣", h:"ゆかた", v:"Áo Kimono mùa hè"}, {k:"寝室", h:"しんしつ", v:"Phòng ngủ"}, {k:"浴室", h:"よくしつ", v:"Phòng tắm"}, {k:"洗面所", h:"せんめんじょ", v:"Nơi rửa mặt"}, {k:"便所", h:"べんじょ", v:"Nhà vệ sinh (từ cũ)"},
    {k:"湯船", h:"ゆぶね", v:"Bồn tắm nước nóng"}, {k:"給湯器", h:"きゅうとうき", v:"Máy nước nóng"}, {k:"入浴剤", h:"にゅうよくざい", v:"Bột tắm"}, {k:"手ぬぐい", h:"てぬぐい", v:"Khăn tay"}, {k:"脱衣所", h:"だついじょ", v:"Phòng thay đồ"},
	 {k:"洗濯機", h:"せんたくき", v:"Máy giặt"}, {k:"掃除機", h:"そうじき", v:"Máy hút bụi"}, {k:"ほうき", h:"ほうき", v:"Cái chổi"}, {k:"ちりとり", h:"ちりとり", v:"Cái hốt rác"}, {k:"雑巾", h:"ぞうきん", v:"Giẻ lau"},
    {k:"バケツ", h:"ばけつ", v:"Cái xô"}, {k:"洗濯ばさみ", h:"せんたくばさみ", v:"Kẹp phơi đồ"}, {k:"アイロン", h:"あいろん", v:"Bàn là"}, {k:"物干し", h:"ものほし", v:"Giá phơi đồ"}, {k:"洗剤", h:"せんざい", v:"Bột giặt/Chất tẩy"},
    {k:"柔軟剤", h:"じゅうなんざい", v:"Nước xả vải"}, {k:"消臭剤", h:"しょうしゅうざい", v:"Xịt khử mùi"}, {k:"乾燥機", h:"かんそうき", v:"Máy sấy quần áo"}, {k:"たわし", h:"たわし", v:"Bàn chải cọ"}, {k:"段ボール", h:"だんぼーる", v:"Thùng bìa carton"},
    {k:"鋏", h:"はさみ", v:"Cái kéo"}, {k:"カッター", h:"かったー", v:"Dao rọc giấy"}, {k:"のり", h:"のり", v:"Keo dán"}, {k:"セロテープ", h:"せろてーぷ", v:"Băng dính"}, {k:"ホッチキス", h:"ほっちきす", v:"Cái dập ghim"},
    {k:"ペン", h:"ぺん", v:"Bút mực"}, {k:"鉛筆", h:"えんぴつ", v:"Bút chì"}, {k:"消しゴム", h:"けしごむ", v:"Cục tẩy"}, {k:"ノート", h:"のーと", v:"Vở ghi"}, {k:"手帳", h:"てちょう", v:"Sổ tay"},
    {k:"薬", h:"くすり", v:"Thuốc"}, {k:"絆創膏", h:"ばんそうこう", v:"Băng cá nhân"}, {k:"体温計", h:"たいおんけい", v:"Nhiệt kế"}, {k:"マスク", h:"ますく", v:"Khẩu trang"}, {k:"懐中電灯", h:"かいちゅうでんとう", v:"Đèn pin"},
    {k:"乾電池", h:"かんでんち", v:"Pin khô"}, {k:"工具", h:"こうぐ", v:"Dụng cụ sửa chữa"}, {k:"金槌", h:"かなづち", v:"Cái búa"}, {k:"ドライバー", h:"どらいばー", v:"Tua vít"}, {k:"釘", h:"くぎ", v:"Cái đinh"},
    {k:"自転車", h:"じてんしゃ", v:"Xe đạp"}, {k:"車", h:"くるま", v:"Xe ô tô"}, {k:"おもちゃ", h:"おもちゃ", v:"Đồ chơi"}, {k:"ぬいぐるみ", h:"ぬいぐるみ", v:"Gấu bông"}, {k:"新聞", h:"しんぶん", v:"Tờ báo"},
    {k:"雑誌", h:"ざっし", v:"Tạp chí"}, {k:"手紙", h:"てがみ", v:"Bức thư"}, {k:"切手", h:"きって", v:"Tem thư"}, {k:"印鑑", h:"いんかん", v:"Con dấu"}, {k:"身分証明書", h:"みぶんしょうめいしょ", v:"Giấy tờ tùy thân"},
    {k:"保険証", h:"ほけんしょう", v:"Thẻ bảo hiểm"}, {k:"通帳", h:"つうちょう", v:"Sổ ngân hàng"}, {k:"現金", h:"げんきん", v:"Tiền mặt"}, {k:"小銭", h:"こぜに", v:"Tiền lẻ"}, {k:"財布", h:"さいふ", v:"Cái ví"},
	 {k:"踏み台", h:"ふみだい", v:"Bệ bước/Thang nhỏ"}, {k:"脚立", h:"きゃたつ", v:"Thang gấp"}, {k:"ペンチ", h:"ぺんち", v:"Cái kìm"}, {k:"巻尺", h:"まきじゃく", v:"Thước dây"}, {k:"接着剤", h:"せっちゃくざい", v:"Keo dán sắt"},
    {k:"針", h:"はり", v:"Cây kim"}, {k:"糸", h:"いと", v:"Sợi chỉ"}, {k:"ボタン", h:"ぼたん", v:"Cái nút áo"}, {k:"裁縫箱", h:"さいほうばこ", v:"Hộp đồ may vá"}, {k:"紐", h:"ひも", v:"Sợi dây"},
    {k:"ビニール袋", h:"びにーるぶくろ", v:"Túi nilon"}, {k:"紙袋", h:"かみぶくろ", v:"Túi giấy"}, {k:"輪ゴム", h:"わごむ", v:"Dây thun"}, {k:"防虫剤", h:"ぼうちゅうざい", v:"Thuốc đuổi côn trùng"}, {k:"殺虫剤", h:"さっちゅうざい", v:"Thuốc diệt côn trùng"},
    {k:"蚊取り線香", h:"かとりせんこう", v:"Nhang muỗi"}, {k:"懐炉", h:"かいろ", v:"Miếng dán giữ nhiệt"}, {k:"傘立て", h:"かさたて", v:"Giá để ô"}, {k:"靴べら", h:"くつべら", v:"Dụng cụ xỏ giày"}, {k:"サンダル", h:"さんだる", v:"Dép quai hậu"},
    {k:"延長コード", h:"えんちょうこーど", v:"Dây cắm nối dài"}, {k:"変圧器", h:"へんあつき", v:"Biến áp/Cục chuyển điện"}, {k:"アダプター", h:"あだぷたー", v:"Bộ thích nghi (Adapter)"}, {k:"電池", h:"でんち", v:"Pin"}, {k:"電卓", h:"denたく", v:"Máy tính bỏ túi"},

    // --- ĐỒ LÀM VƯỜN & ĐỒ DÙNG KHÁC (226-250) ---
    {k:"植木鉢", h:"うえきばち", v:"Chậu cây"}, {k:"ジョウロ", h:"じょうろ", v:"Bình tưới cây"}, {k:"肥料", h:"ひりょう", v:"Phân bón"}, {k:"種", h:"たね", v:"Hạt giống"}, {k:"芝刈り機", h:"しばかりき", v:"Máy cắt cỏ"},
    {k:"シャベル", h:"しゃべる", v:"Cái xẻng"}, {k:"ホース", h:"ほーす", v:"Ống dẫn nước"}, {k:"虫眼鏡", h:"むしめがね", v:"Kính lúp"}, {k:"方位磁石", h:"ほういじしゃく", v:"La bàn"}, {k:"地図", h:"ちず", v:"Bản đồ"},
    {k:"合羽", h:"かっぱ", v:"Áo mưa"}, {k:"日傘", h:"ひがさ", v:"Ô che nắng"}, {k:"扇子", h:"せんす", v:"Quạt giấy/Quạt xếp"}, {k:"うちわ", h:"うちわ", v:"Quạt tròn"}, {k:"お守り", h:"おまもり", v:"Bùa hộ mệnh"},
    {k:"置時計", h:"おきどけい", v:"Đồng hồ để bàn"}, {k:"掛け時計", h:"かけどけい", v:"Đồng hồ treo tường"}, {k:"カレンダー", h:"かれんだー", v:"Tờ lịch"}, {k:"ポスター", h:"ぽすたー", v:"Tờ áp phích"}, {k:"耳かき", h:"みみかき", v:"Cái lấy ráy tai"},
    {k:"爪楊枝", h:"つまようじ", v:"Cây tăm"}, {k:"ティッシュ", h:"てぃっしゅ", v:"Khăn giấy"}, {k:"ウェットティッシュ", h:"うぇっとてぃっしゅ", v:"Khăn giấy ướt"}, {k:"おしぼり", h:"おしぼり", v:"Khăn lau tay"}, {k:"灰皿", h:"はいざら", v:"Cái gạt tàn"},
	];
    while(data.length < 250) {
        let i = data.length + 1;
        data.push({k: `項目 ${i}`, h: `こうもく ${i}`, v: `Mục số ${i} liên quan công việc`});
    }

    const synth = window.speechSynthesis;
    let voices = [];

    function loadVoices() {
        voices = synth.getVoices();
        const vSel = document.getElementById('vSel');
        // Lọc giọng Nhật (ja) và Việt (vi)
        const filtered = voices.filter(v => v.lang.includes('ja') || v.lang.includes('vi'));
        
        vSel.innerHTML = filtered.map(v => {
            const langName = v.lang.includes('ja') ? 'Nhật' : 'Việt';
            return `<option value="${v.name}">${v.name} (${langName})</option>`;
        }).join('');

        // Mặc định chọn giọng Nhật đầu tiên tìm thấy
        const defaultJp = filtered.find(v => v.lang.includes('ja'));
        if(defaultJp) vSel.value = defaultJp.name;
    }

    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = loadVoices;
    }

    function init() {
    loadVoices();
    const tabH = document.getElementById('tabH');
    const tabC = document.getElementById('tabC');

    for (let i = 0; i < 10; i++) {
        const btn = document.createElement('button');
        btn.className = `tab-btn ${i===0?'active':''}`;
        btn.innerText = `Tab ${i+1}`;
        btn.onclick = () => {
            document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
            document.querySelectorAll('.grid-container').forEach(g=>g.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById(`t-${i}`).classList.add('active');
        };
        tabH.appendChild(btn);

        const grid = document.createElement('div');
        grid.className = `grid-container ${i===0?'active':''}`;
        grid.id = `t-${i}`;
        
        data.slice(i*25, (i+1)*25).forEach(d => {
            const card = document.createElement('div');
            card.className = 'vocab-card';
            card.innerHTML = `<div class="kanji">${d.k}</div><div class="hira">${d.h}</div><div class="viet">${d.v}</div>`;
            
            card.onclick = () => {
                synth.cancel();
                const mode = document.getElementById('mode').value;
                const speed = document.getElementById('rate').value;
                
                // Lấy danh sách giọng mới nhất (cần thiết cho iOS)
                const currentVoices = window.speechSynthesis.getVoices();
                
                // ƯU TIÊN GIỌNG KYOKO CHO IPHONE
                const voiceJp = currentVoices.find(v => v.name.includes('Kyoko')) || 
                                currentVoices.find(v => v.lang.includes('ja-JP')) ||
                                currentVoices.find(v => v.lang.includes('ja'));

                const voiceVi = currentVoices.find(v => v.lang.includes('vi-VN')) || 
                                currentVoices.find(v => v.lang.includes('vi'));

                // Đọc tiếng Nhật
                const uJp = new SpeechSynthesisUtterance(d.k);
                if (voiceJp) uJp.voice = voiceJp;
                uJp.rate = speed;
                synth.speak(uJp);

                // Nếu chế độ Nhật-Việt (jv) thì đọc tiếp tiếng Việt
                if (mode === 'jv' && voiceVi) {
                    const uVi = new SpeechSynthesisUtterance(d.v);
                    uVi.voice = voiceVi;
                    uVi.rate = speed;
                    synth.speak(uVi);
                }
            };
            grid.appendChild(card);
        });
        tabC.appendChild(grid);
    }
}

    function toggleMenu() { document.getElementById('side-menu').classList.toggle('active'); }

    document.getElementById('chkHira').onchange = e => document.querySelectorAll('.hira').forEach(el => el.classList.toggle('hidden', !e.target.checked));
    document.getElementById('chkViet').onchange = e => document.querySelectorAll('.viet').forEach(el => el.classList.toggle('hidden', !e.target.checked));
    document.getElementById('bgCol').oninput = e => document.documentElement.style.setProperty('--bg', e.target.value);
    document.getElementById('txCol').oninput = e => document.documentElement.style.setProperty('--text', e.target.value);

    window.onload = init;
</script>
</body>
</html>