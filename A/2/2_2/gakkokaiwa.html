<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KAIWA TRUONG　HOC</title>
    <style>
        :root { --bg: #434343; --text: #0b5394; --card: #ffffff; --accent: #0984e3; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); color: var(--text); margin: 0; transition: 0.3s; }
        #side-menu { position: fixed; right: -300px; top: 0; width: 260px; height: 100%; background: #fff; box-shadow: -2px 0 10px rgba(0,0,0,0.1); z-index: 1000; padding: 20px; transition: 0.3s; overflow-y: auto; color: #333; }
        #side-menu.active { right: 0; }
        .menu-btn { position: fixed; top: 15px; right: 15px; z-index: 1001; padding: 10px 15px; background: var(--accent); color: white; border: none; border-radius: 5px; cursor: pointer; }
        .tabs { display: flex; flex-wrap: wrap; gap: 5px; padding: 60px 10px 10px; justify-content: center; }
        .tab-btn { padding: 8px 12px; border: none; background: #dfe6e9; cursor: pointer; border-radius: 4px; font-size: 13px; }
        .tab-btn.active { background: var(--accent); color: white; }
        .grid-container { display: none; grid-template-columns: repeat(5, 1fr); gap: 10px; padding: 15px; max-width: 1200px; margin: 0 auto; }
        .grid-container.active { display: grid; }
        .vocab-card { background: var(--card); padding: 15px 5px; border-radius: 8px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); cursor: pointer; border: 1px solid #eee; min-height: 120px; display: flex; flex-direction: column; justify-content: center; }
        .kanji { font-size: 1.2em; font-weight: bold; margin-bottom: 5px; color: #2d3436; }
        .hira { color: #636e72; font-size: 0.9em; margin-bottom: 5px; }
        .viet { color: #d63031; font-size: 0.85em; font-weight: 500; }
        .hidden { display: none !important; }
        @media (max-width: 800px) { .grid-container { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>

<button class="menu-btn" onclick="toggleMenu()">⚙ Cài đặt</button>

<div id="side-menu">
    <h3>Cấu hình</h3>
    <label>Màu nền: <input type="color" id="bgCol" value="#434343"></label><br><br>
    <label>Màu chữ: <input type="color" id="txCol" value="#0b5394"></label><hr>
    <label><input type="checkbox" id="chkHira" checked> Hiện Hiragana</label><br>
    <label><input type="checkbox" id="chkViet" checked> Hiện Tiếng Việt</label><hr>
    <label>Giọng mặc định: <select id="vSel" style="width:100%"></select></label><p style="font-size: 11px; color: gray;">* Hệ thống sẽ tự ưu tiên giọng đúng ngôn ngữ khi đọc Nhật-Việt.</p>
    <label>Tốc độ: <input type="range" id="rate" min="0.5" max="1.5" step="0.1" value="1"></label><br><br>
    <label>Chế độ đọc: 
        <select id="mode" style="width:100%">
            <option value="jp">Chỉ tiếng Nhật</option>
            <option value="jv" selected>Nhật - Việt (Chuẩn)</option>
        </select>
    </label><br><br>
    <button onclick="toggleMenu()" style="width:100%; padding: 10px; background: #eee; border: none; border-radius: 4px; cursor: pointer;">Đóng</button>
</div>

<div class="tabs" id="tabH"></div>
<div id="tabC"></div>

<script>
    const data = [
	  {k:"おはようございます", h:"おはようございます", v:"Em chào thầy/cô buổi sáng"},
  {k:"こんにちは", h:"こんにちは", v:"Em chào thầy/cô (ban ngày)"},
  {k:"さようなら", h:"さようなら", v:"Em chào thầy/cô em về ạ"},
  {k:"また明日", h:"またあした", v:"Hẹn gặp lại bạn ngày mai"},
  {k:"失礼します", h:"しつれいします", v:"Em xin phép (vào phòng)"},
  {k:"お名前は何ですか", h:"おなまえはなんですか", v:"Bạn tên là gì vậy?"},
  {k:"私は～です", h:"わたしは～です", v:"Mình tên là ~"},
  {k:"友達になろう", h:"ともだちになろう", v:"Chúng mình làm bạn nhé"},
  {k:"一緒に遊ぼう", h:"いっしょにあそぼう", v:"Cùng chơi với nhau nhé"},
  {k:"いいよ", h:"いいよ", v:"Được chứ / Đồng ý"},
  {k:"ありがとう", h:"ありがとう", v:"Cảm ơn bạn nhé"},
  {k:"ありがとうございます", h:"ありがとうございます", v:"Em cảm ơn thầy/cô ạ"},
  {k:"ごめんなさい", h:"ごめんなさい", v:"Mình xin lỗi bạn"},
  {k:"すみません", h:"すみません", v:"Em xin lỗi thầy/cô"},
  {k:"大丈夫？", h:"だいじょうぶ？", v:"Bạn có sao không?"},
  {k:"大丈夫だよ", h:"だいじょうぶだよ", v:"Mình không sao đâu"},
  {k:"トイレに行ってもいいですか", h:"といれにいってもいいですか", v:"Em xin phép đi vệ sinh ạ"},
  {k:"水を飲んでもいいですか", h:"みずをのんでもいいですか", v:"Em xin phép đi uống nước ạ"},
  {k:"手を洗ってきます", h:"てをあらってきます", v:"Em đi rửa tay ạ"},
  {k:"うがいをしましょう", h:"うがいをしましょう", v:"Chúng ta cùng súc miệng nào"},
  {k:"着替えをします", h:"きがえをします", v:"Em đi thay quần áo ạ"},
  {k:"元気ですか", h:"げんきですか", v:"Bạn có khỏe không?"},
  {k:"はい、元気です", h:"はい、げんきです", v:"Vâng, em khỏe ạ"},
  {k:"お腹が空きました", h:"おなかがすきました", v:"Em đói bụng rồi"},
  {k:"喉が渇きました", h:"のどがかわきました", v:"Em khát nước quá"},
  {k:"いただきます", h:"いただきます", v:"Mời mọi người ăn cơm (trước khi ăn)"},
  {k:"ごちそうさまでした", h:"ごちそうさまでした", v:"Em ăn xong rồi ạ (sau khi ăn)"},
  {k:"給食、おいしい！", h:"きゅうしょく、おいしい！", v:"Cơm trường ngon quá!"},
  {k:"おかわりください", h:"おかわりください", v:"Cho em xin thêm một bát nữa"},
  {k:"苦手なものは何？", h:"にがてなものはなに？", v:"Bạn không thích ăn món gì?"},
  {k:"ピーマン、嫌い", h:"ぴーまん、きらい", v:"Mình ghét ăn ớt chuông"},
  {k:"全部食べたよ", h:"ぜんぶたべたよ", v:"Mình ăn hết sạch rồi"},
  {k:"歯磨きしよう", h:"はみがきしよう", v:"Cùng đánh răng nào"},
  {k:"番号を言います", h:"ばんごうをいいます", v:"Em xin đọc số thứ tự"},
  {k:"はい！", h:"はい！", v:"Có! (Khi được gọi tên)"},
  {k:"お休みします", h:"おやすみします", v:"Hôm nay em xin nghỉ ạ"},
  {k:"遅刻しました", h:"ちこくしました", v:"Em xin lỗi em đến muộn"},
  {k:"忘れ物をしました", h:"わすれものをしました", v:"Em bị quên đồ rồi"},
  {k:"貸してください", h:"かしてください", v:"Cho mình mượn với"},
  {k:"いいですよ、どうぞ", h:"いいですよ、どうぞ", v:"Được chứ, mời bạn"},
  {k:"後で返してね", h:"あとでかえしてね", v:"Lát nữa trả mình nhé"},
  {k:"なくしちゃった", h:"なくしちゃった", v:"Mình làm mất rồi"},
  {k:"一緒に探そう", h:"いっしょにさがそう", v:"Để mình tìm cùng bạn"},
  {k:"見つけた！", h:"みつけた！", v:"Tìm thấy rồi!"},
  {k:"暑いね", h:"あついね", v:"Nóng nhỉ"},
  {k:"寒いね", h:"さむいね", v:"Lạnh nhỉ"},
  {k:"雨が降ってきた", h:"あめがふってきた", v:"Mưa rồi kìa"},
  {k:"傘を持ってる？", h:"かさをもってる？", v:"Bạn có mang ô không?"},
  {k:"ランドセル、重い", h:"らんどせる、おもい", v:"Cặp sách nặng quá"},
  {k:"帽子をかぶろう", h:"ぼうしをかぶろう", v:"Cùng đội mũ vào nào"},
  {k:"上履きを履こう", h:"うわばきをはこう", v:"Cùng đi giày trong nhà nào"},
  {k:"靴をそろえよう", h:"くつをそろえよう", v:"Xếp giày cho gọn nào"},
  {k:"お先に失礼します", h:"おさきにしつれいします", v:"Em xin phép về trước ạ"},
  {k:"気をつけて帰ってね", h:"きをつけてかえってね", v:"Về cẩn thận nhé"},
  {k:"また来週", h:"またらいしゅう", v:"Hẹn gặp lại tuần sau"},
  {k:"楽しみだね", h:"たのしみだね", v:"Mong đợi quá nhỉ"},
  {k:"びっくりした", h:"びっくりした", v:"Hết cả hồn"},
  {k:"痛い！", h:"いたい！", v:"Đau quá!"},
  {k:"泣かないで", h:"なかないで", v:"Nín đi đừng khóc"},
  {k:"絆創膏貼って", h:"ばんそうこうはって", v:"Dán băng cá nhân cho em"},
  {k:"眠いよ", h:"ねむいよ", v:"Mình buồn ngủ quá"},
  {k:"疲れたー", h:"つかれたー", v:"Mệt quá đi"},
  {k:"おうちへ帰りたい", h:"おうちへかえりたい", v:"Em muốn về nhà"},
  {k:"頑張れ！", h:"がんばれ！", v:"Cố lên!"},
  {k:"頑張るぞ！", h:"がんばるぞ！", v:"Mình sẽ cố gắng!"},
  {k:"やったー！", h:"やったー！", v:"A, làm được rồi / Thắng rồi!"},
  {k:"すごいね", h:"すごいね", v:"Bạn giỏi quá"},
  {k:"上手だね", h:"じょうずだね", v:"Bạn làm khéo quá"},
  {k:"優しいね", h:"やさしいね", v:"Bạn thật tốt bụng"},
  {k:"かっこいい", h:"かっこいい", v:"Ngầu quá"},
  {k:"かわいいね", h:"かわいいね", v:"Đáng yêu thế"},
  {k:"面白い！", h:"おもしろい！", v:"Buồn cười quá / Thú vị quá"},
  {k:"静かにして", h:"しずかにして", v:"Trật tự nào"},
  {k:"順番、守ろう", h:"じゅんばん、まもろう", v:"Hãy xếp hàng/đợi đến lượt nhé"},
  {k:"並んでください", h:"ならんでください", v:"Các em hãy xếp hàng"},
  {k:"前ならえ", h:"まえならえ", v:"Gióng hàng thẳng"},
  {k:"直れ", h:"なおれ", v:"Thôi (bỏ tay xuống)"},
  {k:"気をつけ", h:"きをつけ", v:"Nghiêm!"},
  {k:"礼", h:"れい", v:"Chào!"},
  {k:"よろしくね", h:"よろしくね", v:"Rất mong được giúp đỡ"},
   {k:"授業が始まるよ", h:"じゅぎょうがはじまるよ", v:"Giờ học sắp bắt đầu rồi"},
  {k:"席に座ろう", h:"せきにすわろう", v:"Cùng ngồi vào chỗ nào"},
  {k:"教科書を出して", h:"きょうかしょをだして", v:"Lấy sách giáo khoa ra nào"},
  {k:"筆箱を忘れた", h:"ふでばこをわすれた", v:"Em quên hộp bút rồi"},
  {k:"鉛筆、削って", h:"えんぴつ、けずって", v:"Gọt bút chì giúp em với"},
  {k:"質問があります", h:"しつもんがあります", v:"Em có câu hỏi ạ"},
  {k:"分かりません", h:"わかりません", v:"Em không hiểu ạ"},
  {k:"分かりました", h:"わかりました", v:"Em hiểu rồi ạ"},
  {k:"もう一度お願いします", h:"もういちどおねがいします", v:"Xin thầy nhắc lại một lần nữa"},
  {k:"ゆっくりお願いします", h:"ゆっくりおねがいします", v:"Xin nói chậm lại ạ"},
  {k:"これ、何？", h:"これ、なに？", v:"Cái này là cái gì?"},
  {k:"見せてください", h:"みせてください", v:"Cho em xem với"},
  {k:"黒板を見て", h:"こくばんをみて", v:"Nhìn lên bảng nào"},
  {k:"ノートに書こう", h:"のーとにかこう", v:"Cùng viết vào vở nào"},
  {k:"綺麗に書けたね", h:"きれいにかけたね", v:"Con viết đẹp lắm"},
  {k:"はなまる、もらった！", h:"はなまる、もらった！", v:"Tớ được điểm hoa điểm mười rồi!"},
  {k:"漢字、難しい", h:"かんじ、むずかしい", v:"Chữ Hán khó quá"},
  {k:"読んでみて", h:"よんでみて", v:"Em hãy đọc thử xem"},
  {k:"大きな声で", h:"おおきなこえで", v:"Nói to lên nào"},
  {k:"算数、大好き", h:"さんすう、だいすき", v:"Mình rất thích học toán"},
  {k:"1足す1は？", h:"1たす1は？", v:"1 cộng 1 bằng mấy?"},
  {k:"正解！", h:"せいかい！", v:"Chính xác!"},
  {k:"間違えちゃった", h:"まちがえちゃった", v:"Em bị nhầm rồi"},
  {k:"消しゴム、貸して", h:"けしごむ、かして", v:"Cho mình mượn cục tẩy"},
  {k:"はい、どうぞ", h:"はい、どうぞ", v:"Đây, mời bạn"},
  {k:"辞書で調べよう", h:"じしょでしらべよう", v:"Cùng tra từ điển nào"},
  {k:"図工の時間", h:"ずこうのじかん", v:"Giờ học mỹ thuật"},
  {k:"何を書こうかな", h:"なにをかこうかな", v:"Nên vẽ gì bây giờ nhỉ?"},
  {k:"クレヨン、貸して", h:"くれよん、かして", v:"Cho mình mượn bút màu sáp"},
  {k:"はさみを使うよ", h:"はさみをつかうよ", v:"Dùng kéo nhé"},
  {k:"気をつけてね", h:"きをつけてね", v:"Cẩn thận nhé"},
  {k:"のりで貼ろう", h:"のりではろう", v:"Dán bằng hồ nào"},
  {k:"音楽の時間", h:"おんがくのじかん", v:"Giờ học nhạc"},
  {k:"歌を歌おう", h:"うたをうたおう", v:"Cùng hát nào"},
  {k:"ピアノ、上手だね", h:"ぴあの、じょうずだね", v:"Bạn đánh đàn giỏi thế"},
  {k:"体育の時間", h:"たいいくのじかん", v:"Giờ thể dục"},
  {k:"体操服に着替えよう", h:"たいそうふくにきがえよう", v:"Thay quần áo thể dục nào"},
  {k:"校庭に行こう", h:"こうていにいこう", v:"Ra sân trường thôi"},
  {k:"かけっこしよう", h:"かけっこしよう", v:"Cùng thi chạy nào"},
  {k:"位置について", h:"いちについて", v:"Vào vị trí"},
  {k:"用意、どん！", h:"ようい、どん！", v:"Chuẩn bị, chạy!"},
  {k:"一番だったよ！", h:"いちばんだったよ！", v:"Tớ về nhất đấy!"},
  {k:"縄跳び、できる？", h:"なわとび、できる？", v:"Bạn biết nhảy dây không?"},
  {k:"鉄棒、怖い", h:"てつぼう、こわい", v:"Xà đơn sợ quá"},
  {k:"プール、楽しい", h:"ぷーる、たのしい", v:"Đi bơi vui quá"},
  {k:"泳げたよ！", h:"およげたよ！", v:"Tớ bơi được rồi!"},
  {k:"図書室へ行こう", h:"としょしつへいこう", v:"Đến thư viện thôi"},
  {k:"本を借りたいです", h:"ほんをかりたいです", v:"Em muốn mượn sách ạ"},
  {k:"静かに読もうね", h:"しずかによもうね", v:"Cùng đọc khẽ thôi nhé"},
  {k:"面白い絵本", h:"おもしろいえほん", v:"Cuốn truyện tranh thú vị"},
  {k:"紙芝居、始まるよ", h:"かみしばい、はじまるよ", v:"Kịch giấy sắp bắt đầu rồi"},
  {k:"宿題、ある？", h:"しゅくだい、ある？", v:"Có bài tập về nhà không?"},
  {k:"宿題、忘れた", h:"しゅくだい、わすれた", v:"Em quên làm bài tập rồi"},
  {k:"おうちでやるよ", h:"おうちでやるよ", v:"Về nhà tớ sẽ làm"},
  {k:"連絡帳、出して", h:"れんらくちょう、だして", v:"Lấy sổ liên lạc ra nào"},
  {k:"先生、ハンコ押して", h:"せんせい、はんこおして", v:"Thầy đóng dấu giúp em ạ"},
  {k:"プリント、配るね", h:"ぷりんと、くばるね", v:"Tớ phát phiếu bài tập nhé"},
  {k:"後ろに回して", h:"うしろにまわして", v:"Chuyền xuống phía sau nhé"},
  {k:"集めます", h:"あつめます", v:"Em xin thu bài ạ"},
  {k:"終わった人？", h:"おわったひと？", v:"Ai đã xong rồi?"},
  {k:"まだです", h:"まだです", v:"Em vẫn chưa xong"},
  {k:"あとちょっとです", h:"あとちょっとです", v:"Còn một chút nữa thôi ạ"},
  {k:"できました！", h:"できました！", v:"Em làm được rồi ạ!"},
  {k:"発表します", h:"はっぴょうします", v:"Em xin được phát biểu"},
  {k:"みんなに聞いて", h:"みんなにきいて", v:"Cả lớp lắng nghe bạn nhé"},
  {k:"いい思いつき！", h:"いいおもいつき！", v:"Ý tưởng hay đấy!"},
  {k:"そうだね", h:"そうだね", v:"Đúng vậy nhỉ"},
  {k:"違うと思うな", h:"ちがうとおもうな", v:"Tớ nghĩ là không phải đâu"},
  {k:"一緒にやろう", h:"いっしょにやろう", v:"Cùng làm chung nhé"},
  {k:"手伝ってあげる", h:"てつだってあげる", v:"Để tớ giúp bạn một tay"},
  {k:"お願いします", h:"おねがいします", v:"Làm ơn giúp mình"},
  {k:"時間ですよ", h:"じかんですよ", v:"Đến giờ rồi nhé"},
  {k:"休憩タイム", h:"きゅうけいたいむ", v:"Giờ nghỉ giải lao"},
  {k:"お外で遊ぼう", h:"おそとであそぼう", v:"Ra ngoài chơi đi"},
  {k:"チャイムが鳴ったよ", h:"ちゃいむがなったよ", v:"Chuông reo rồi kìa"},
  {k:"準備はいい？", h:"じゅんびはいい？", v:"Chuẩn bị xong chưa?"},
  {k:"準備オッケー！", h:"じゅんびおっけー！", v:"Chuẩn bị xong rồi!"},
  {k:"今日の授業終わり", h:"きょうのじゅぎょうおわり", v:"Giờ học hôm nay kết thúc"},
  {k:"名札をつけて", h:"なふだをつけて", v:"Hãy đeo bảng tên vào"},
  {k:"明日も頑張ろう", h:"あしたもがんばろう", v:"Mai cũng cố gắng nhé"},
   {k:"掃除の時間だよ", h:"そうじのじかんだよ", v:"Đến giờ dọn dẹp rồi"},
  {k:"ほうきを貸して", h:"ほうきをかして", v:"Cho tớ mượn cái chổi"},
  {k:"雑巾がけ、しゅっしゅっ", h:"ぞうきんがけ、しゅっしゅっ", v:"Lau sàn bằng khăn nào"},
  {k:"机を運ぼう", h:"つくえをはこぼう", v:"Cùng khiêng bàn nào"},
  {k:"ゴミを捨てよう", h:"ごみをすてよう", v:"Cùng đi đổ rác nào"},
  {k:"ぴかぴかになったね", h:"ぴかぴかになったね", v:"Sạch bong kin kít luôn"},
  {k:"お花の水やり", h:"おはなのみずやり", v:"Tưới nước cho hoa"},
  {k:"朝顔、咲いたよ！", h:"あさがお、さいたよ！", v:"Hoa bìm bìm nở rồi kìa!"},
  {k:"虫を見つけた！", h:"むしをみつけた！", v:"Tớ thấy con sâu này!"},
  {k:"ダンゴムシ、かわいい", h:"だんごむし、かわいい", v:"Con cuốn chiếu dễ thương quá"},
  {k:"触ってもいい？", h:"さわってもいい？", v:"Tớ chạm vào được không?"},
  {k:"逃がしてあげよう", h:"にがしてあげよう", v:"Thả nó đi thôi"},
  {k:"公園に行こう", h:"こうえんにいこう", v:"Đi ra công viên chơi đi"},
  {k:"滑り台、楽しい", h:"すべりだい、たのしい", v:"Chơi cầu trượt vui quá"},
  {k:"ブランコ、代わって", h:"ぶらんこ、かわって", v:"Đến lượt tớ chơi xích đu nhé"},
  {k:"おにごっこしよう", h:"おにごっこしよう", v:"Chơi đuổi bắt đi"},
  {k:"おに、だーれだ？", h:"おに、だーれだ？", v:"Ai là người đuổi nào?"},
  {k:"待て待てー！", h:"まてまてー！", v:"Đứng lại đó!"},
  {k:"捕まえた！", h:"つかまえた！", v:"Bắt được rồi nhé!"},
  {k:"かくれんぼしよう", h:"かくれんぼしよう", v:"Chơi trốn tìm đi"},
  {k:"もういいかい？", h:"もういいかい？", v:"Xong chưa?"},
  {k:"まーだだよ", h:"まーだだよ", v:"Vẫn chưa xong đâu"},
  {k:"もういいよ", h:"もういいよ", v:"Xong rồi đấy"},
  {k:"どこかなー？", h:"どこかなー？", v:"Bạn ở đâu nhỉ?"},
  {k:"みーつけた！", h:"みーつけた！", v:"Tìm thấy bạn rồi nhé!"},
  {k:"じゃんけんぽん！", h:"じゃんけんぽん！", v:"Oẳn tù tì!"},
  {k:"勝ったー！", h:"かったー！", v:"Thắng rồi!"},
  {k:"負けちゃった", h:"まけちゃった", v:"Thua rồi"},
  {k:"あいこでしょ！", h:"あいこでしょ！", v:"Hòa rồi, làm lại!"},
  {k:"縄跳び、見ててね", h:"なわとび、みててね", v:"Nhìn tớ nhảy dây này"},
  {k:"あやとり、教えて", h:"あやとり、おしえて", v:"Dạy tớ chơi trò tạo hình bằng dây đi"},
  {k:"折り紙、折ろう", h:"おりがみ、おろう", v:"Cùng gấp giấy Origami nào"},
  {k:"今日は遠足だね", h:"きょうはえんそくだね", v:"Hôm nay đi dã ngoại nhỉ"},
  {k:"お弁当、見せて", h:"おべんとう、みせて", v:"Cho tớ xem hộp cơm của bạn"},
  {k:"卵焼き、おいしそう", h:"たまごやき、おいしそう", v:"Món trứng cuộn trông ngon thế"},
  {k:"一つ食べる？", h:"ひとつたべる？", v:"Bạn ăn thử một miếng không?"},
  {k:"体育祭、頑張ろう", h:"たいいくさい、がんばろう", v:"Hội thao cùng cố gắng nhé"},
  {k:"赤組、頑張れ", h:"あかぐみ、がんばれ", v:"Đội đỏ cố lên"},
  {k:"白組、負けるな", h:"しろぐみ、まけるな", v:"Đội trắng đừng để thua nhé"},
  {k:"綱引き、わっしょい！", h:"つなひき、わっしょい！", v:"Kéo co nào, cố lên!"},
  {k:"玉入れ、いっぱい入った", h:"たまいれ、いっぱいはいった", v:"Ném bóng vào rổ được nhiều quá"},
  {k:"文化祭、楽しみ", h:"ぶんかさい、たのしみ", v:"Mong đợi lễ hội văn hóa quá"},
  {k:"踊りを踊ろう", h:"おどりをおどろう", v:"Cùng nhảy múa nào"},
  {k:"合奏、上手だね", h:"がっそう、じょうずだね", v:"Cả lớp hòa tấu giỏi thật"},
  {k:"誕生日おめでとう", h:"たんじょうびおめでとう", v:"Chúc mừng sinh nhật"},
  {k:"何歳になったの？", h:"なんさいになったの？", v:"Bạn mấy tuổi rồi?"},
  {k:"七歳になったよ", h:"ななさいになったよ", v:"Tớ 7 tuổi rồi"},
  {k:"プレゼント、どうぞ", h:"ぷれぜんと、どうぞ", v:"Tặng bạn quà này"},
  {k:"嬉しい！ありがとう", h:"うれしい！ありがとう", v:"Tớ vui quá! Cảm ơn bạn"},
  {k:"夏休み、何するの？", h:"なつやすみ、なにするの？", v:"Nghỉ hè bạn định làm gì?"},
  {k:"海に行きたいな", h:"うみにいきたいな", v:"Tớ muốn đi biển quá"},
  {k:"冬休み、雪降るかな", h:"ふゆやすみ、ゆきふるかな", v:"Nghỉ đông không biết có tuyết rơi không"},
  {k:"雪だるま、作ろう", h:"ゆきだるま、つくろう", v:"Cùng nặn người tuyết nào"},
  {k:"春休み、桜きれい", h:"はるやすみ、さくらきれい", v:"Nghỉ xuân hoa anh đào đẹp quá"},
  {k:"もうすぐ二年生", h:"もうすぐにねんせい", v:"Sắp lên lớp 2 rồi"},
  {k:"先生、大好き", h:"せんせい、だいすき", v:"Em yêu thầy/cô lắm"},
  {k:"みんな、大好き", h:"みんな、だいすき", v:"Tớ yêu tất cả các bạn"},
  {k:"明日も遊ぼうね", h:"あしたもあそぼうね", v:"Mai lại chơi tiếp nhé"},
  {k:"約束だよ", h:"やくそくだよ", v:"Hứa rồi đấy nhé"},
  {k:"指切りげんまん", h:"ゆびきりげんまん", v:"Móc ngoéo tay hứa nào"},
  {k:"喧嘩、やめよう", h:"けんか、やめよう", v:"Đừng cãi nhau nữa"},
  {k:"仲良しが一番", h:"なかよしがいちばん", v:"Thân thiết với nhau là tốt nhất"},
  {k:"いい子にしてたよ", h:"いいこにしてたよ", v:"Tớ đã rất ngoan đấy"},
  {k:"褒められちゃった", h:"ほめられちゃった", v:"Tớ vừa được khen xong"},
  {k:"恥ずかしいな", h:"はずかしいな", v:"Ngại quá đi"},
  {k:"おうちの人に渡してね", h:"おうちのひとにわたしてね", v:"Đưa cái này cho bố mẹ nhé"},
  {k:"早く帰ろう", h:"はやくかえろう", v:"Cùng về nhanh thôi"},
  {k:"お腹がぺこぺこだ", h:"おなかがぺこぺこだ", v:"Bụng đói meo rồi"},
  {k:"今日は楽しかった？", h:"きょうはたのしかった？", v:"Hôm nay có vui không?"},
  {k:"うん、すっごく楽しかった！", h:"うん、すっごくたのしかった！", v:"Vâng, cực kỳ vui luôn ạ!"},
  {k:"明日も晴れるかな", h:"あしたもはれるかな", v:"Không biết mai trời có nắng không"},
  {k:"てるてる坊主、作ろう", h:"てるてるぼうず、つくろう", v:"Cùng làm búp bê cầu nắng nào"},
  {k:"おやすみなさい", h:"おやすみなさい", v:"Chúc ngủ ngon"},
  {k:"良いお年を", h:"よいおとしを", v:"Chúc mừng năm mới (nói trước Tết)"},
  {k:"あけましておめでとう", h:"あけましておめでとう", v:"Chúc mừng năm mới (nói sau Tết)"},
  {k:"今年もよろしくね", h:"ことしもよろしくね", v:"Năm nay cũng mong được giúp đỡ"},
  {k:"お兄さん、お姉さんだね", h:"おにいさん、おねえさんだね", v:"Giờ chúng mình là anh lớn chị lớn rồi"},
  {k:"ずっと友達だよ", h:"ずっとともだちだよ", v:"Chúng mình mãi là bạn nhé"},
  {k:"図書カード、持った？", h:"としょかーど、もった？", v:"Bạn mang thẻ thư viện chưa?"},
  {k:"うがい、手洗い、忘れずに", h:"うがい、てあらい、わすれずに", v:"Đừng quên súc miệng và rửa tay"},
  {k:"防犯ブザー、持ってる", h:"ぼうはんぶざー、もってる", v:"Mình có mang theo còi báo động"},
  {k:"不審者に気をつけて", h:"ふしんしゃにきをつけ", v:"Cẩn thận với người lạ mặt"},
  {k:"信号を守ろう", h:"しんごうをまもろう", v:"Hãy tuân thủ đèn tín hiệu"},
  {k:"横断歩道を渡ろう", h:"おうだんほどうをわたろう", v:"Cùng đi trên vạch kẻ đường cho người đi bộ"},
  {k:"右見て、左見て", h:"みぎみて、ひだりみて", v:"Nhìn bên phải, nhìn bên trái"},
  {k:"手を挙げて渡ろう", h:"てをあげてわたろう", v:"Giơ tay xin đường khi qua lộ"},
  {k:"ただいま！", h:"ただいま！", v:"Con/Em đã về rồi ạ!"},
  {k:"おかえりなさい", h:"おかえりなさい", v:"Mừng bạn/con đã về"},
  {k:"宿題、終わったよ", h:"しゅくだい、おわったよ", v:"Con làm xong bài tập rồi"},
  {k:"明日の準備、できた", h:"あしたのじゅんび、できた", v:"Con chuẩn bị xong đồ cho mai rồi"},
	];
    while(data.length < 250) {
        let i = data.length + 1;
        data.push({k: `項目 ${i}`, h: `こうもく ${i}`, v: `Mục số ${i} liên quan công việc`});
    }

    const synth = window.speechSynthesis;
    let voices = [];

    function loadVoices() {
        voices = synth.getVoices();
        const vSel = document.getElementById('vSel');
        // Lọc giọng Nhật (ja) và Việt (vi)
        const filtered = voices.filter(v => v.lang.includes('ja') || v.lang.includes('vi'));
        
        vSel.innerHTML = filtered.map(v => {
            const langName = v.lang.includes('ja') ? 'Nhật' : 'Việt';
            return `<option value="${v.name}">${v.name} (${langName})</option>`;
        }).join('');

        // Mặc định chọn giọng Nhật đầu tiên tìm thấy
        const defaultJp = filtered.find(v => v.lang.includes('ja'));
        if(defaultJp) vSel.value = defaultJp.name;
    }

    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = loadVoices;
    }

    function init() {
    loadVoices();
    const tabH = document.getElementById('tabH');
    const tabC = document.getElementById('tabC');

    for (let i = 0; i < 10; i++) {
        const btn = document.createElement('button');
        btn.className = `tab-btn ${i===0?'active':''}`;
        btn.innerText = `Tab ${i+1}`;
        btn.onclick = () => {
            document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
            document.querySelectorAll('.grid-container').forEach(g=>g.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById(`t-${i}`).classList.add('active');
        };
        tabH.appendChild(btn);

        const grid = document.createElement('div');
        grid.className = `grid-container ${i===0?'active':''}`;
        grid.id = `t-${i}`;
        
        data.slice(i*25, (i+1)*25).forEach(d => {
            const card = document.createElement('div');
            card.className = 'vocab-card';
            card.innerHTML = `<div class="kanji">${d.k}</div><div class="hira">${d.h}</div><div class="viet">${d.v}</div>`;
            
            card.onclick = () => {
                synth.cancel();
                const mode = document.getElementById('mode').value;
                const speed = document.getElementById('rate').value;
                
                // Lấy danh sách giọng mới nhất (cần thiết cho iOS)
                const currentVoices = window.speechSynthesis.getVoices();
                
                // ƯU TIÊN GIỌNG KYOKO CHO IPHONE
                const voiceJp = currentVoices.find(v => v.name.includes('Kyoko')) || 
                                currentVoices.find(v => v.lang.includes('ja-JP')) ||
                                currentVoices.find(v => v.lang.includes('ja'));

                const voiceVi = currentVoices.find(v => v.lang.includes('vi-VN')) || 
                                currentVoices.find(v => v.lang.includes('vi'));

                // Đọc tiếng Nhật
                const uJp = new SpeechSynthesisUtterance(d.k);
                if (voiceJp) uJp.voice = voiceJp;
                uJp.rate = speed;
                synth.speak(uJp);

                // Nếu chế độ Nhật-Việt (jv) thì đọc tiếp tiếng Việt
                if (mode === 'jv' && voiceVi) {
                    const uVi = new SpeechSynthesisUtterance(d.v);
                    uVi.voice = voiceVi;
                    uVi.rate = speed;
                    synth.speak(uVi);
                }
            };
            grid.appendChild(card);
        });
        tabC.appendChild(grid);
    }
}

    function toggleMenu() { document.getElementById('side-menu').classList.toggle('active'); }

    document.getElementById('chkHira').onchange = e => document.querySelectorAll('.hira').forEach(el => el.classList.toggle('hidden', !e.target.checked));
    document.getElementById('chkViet').onchange = e => document.querySelectorAll('.viet').forEach(el => el.classList.toggle('hidden', !e.target.checked));
    document.getElementById('bgCol').oninput = e => document.documentElement.style.setProperty('--bg', e.target.value);
    document.getElementById('txCol').oninput = e => document.documentElement.style.setProperty('--text', e.target.value);

    window.onload = init;
</script>
</body>
</html>